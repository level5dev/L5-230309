{"version":3,"sources":["webpack:///./assets/js/theme/product.js","webpack:///./assets/js/theme/product/video-gallery.js","webpack:///./assets/js/theme/custom/its-product.js","webpack:///./assets/js/theme/custom/schematics.js"],"names":["Product","_PageManager","context","_this","call","url","window","location","href","$reviewLink","$","$bulkPricingLink","reviewModal","modalFactory","_proto","prototype","onReady","validator","_this2","document","on","indexOf","history","replaceState","title","pathname","collapsibleFactory","this","productDetails","ProductDetails","BCData","product_attributes","setProductVariant","videoGallery","bulkPricingHandler","$reviewForm","classifyForm","length","review","Review","registerValidation","ariaDescribeReviewInputs","performCheck","areAll","productReviewHandler","ITSProduct","$form","find","each","_","input","$input","msgSpanId","attr","siblings","trigger","PageManager","VideoGallery","$element","$player","$videos","currentVideo","bindEvents","selectNewVideo","e","preventDefault","$target","currentTarget","id","data","$selectedThumb","setMainVideo","setActiveThumb","removeClass","addClass","bind","index","element","$el","showMoreReviews","schematics","$targetTabId","$store","currentPage","productPageReviewsCount","productpageReviewsCount","nextPageURL","productpageURL","requestOptions","config","product","reviews","limit","template","utils","api","getPage","err","res","hide","appendTo","slideDown","event","image","Image","src","onload","images","pswpElement","target","w","width","h","height","querySelectorAll","PhotoSwipe","PhotoSwipeUIDefault","bgOpacity","init"],"mappings":"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","file":"theme-bundle.chunk.1.js","sourcesContent":["/*\n Import all product specific js\n */\nimport PageManager from './page-manager';\nimport Review from './product/reviews';\nimport collapsibleFactory from './common/collapsible';\nimport ProductDetails from './common/product-details';\nimport videoGallery from './product/video-gallery';\nimport { classifyForm } from './common/utils/form-utils';\nimport modalFactory from './global/modal';\nimport ITSProduct from './custom/its-product';\n\nexport default class Product extends PageManager {\n    constructor(context) {\n        super(context);\n        this.url = window.location.href;\n        this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\n        this.$bulkPricingLink = $('[data-reveal-id=\"modal-bulk-pricing\"]');\n        this.reviewModal = modalFactory('#modal-review-form')[0];\n    }\n\n    onReady() {\n        // Listen for foundation modal close events to sanitize URL after review.\n        $(document).on('close.fndtn.reveal', () => {\n            if (this.url.indexOf('#write_review') !== -1 && typeof window.history.replaceState === 'function') {\n                window.history.replaceState(null, document.title, window.location.pathname);\n            }\n        });\n\n        let validator;\n\n        // Init collapsible\n        collapsibleFactory();\n\n        this.productDetails = new ProductDetails($('.productView'), this.context, window.BCData.product_attributes);\n        this.productDetails.setProductVariant();\n\n        videoGallery();\n\n        this.bulkPricingHandler();\n\n        const $reviewForm = classifyForm('.writeReview-form');\n\n        if ($reviewForm.length === 0) return;\n\n        const review = new Review({ $reviewForm });\n\n        $('body').on('click', '[data-reveal-id=\"modal-review-form\"]', () => {\n            validator = review.registerValidation(this.context);\n            this.ariaDescribeReviewInputs($reviewForm);\n        });\n\n        $reviewForm.on('submit', () => {\n            if (validator) {\n                validator.performCheck();\n                return validator.areAll('valid');\n            }\n            return false;\n        });\n\n\n        this.productReviewHandler();\n\n        /**\n         * IntuitSolutions - Custom Product\n         */\n        this.ITSProduct = new ITSProduct(this.context);\n    }\n\n    ariaDescribeReviewInputs($form) {\n        $form.find('[data-input]').each((_, input) => {\n            const $input = $(input);\n            const msgSpanId = `${$input.attr('name')}-msg`;\n\n            $input.siblings('span').attr('id', msgSpanId);\n            $input.attr('aria-describedby', msgSpanId);\n        });\n    }\n\n    productReviewHandler() {\n        if (this.url.indexOf('#write_review') !== -1) {\n            this.$reviewLink.trigger('click');\n        }\n    }\n\n    bulkPricingHandler() {\n        if (this.url.indexOf('#bulk_pricing') !== -1) {\n            this.$bulkPricingLink.trigger('click');\n        }\n    }\n}\n","export class VideoGallery {\n    constructor($element) {\n        this.$player = $element.find('[data-video-player]');\n        this.$videos = $element.find('[data-video-item]');\n        this.currentVideo = {};\n        this.bindEvents();\n    }\n\n    selectNewVideo(e) {\n        e.preventDefault();\n\n        const $target = $(e.currentTarget);\n\n        this.currentVideo = {\n            id: $target.data('videoId'),\n            $selectedThumb: $target,\n        };\n\n        this.setMainVideo();\n        this.setActiveThumb();\n    }\n\n    setMainVideo() {\n        this.$player.attr('src', `//www.youtube.com/embed/${this.currentVideo.id}`);\n    }\n\n    setActiveThumb() {\n        this.$videos.removeClass('is-active');\n        this.currentVideo.$selectedThumb.addClass('is-active');\n    }\n\n    bindEvents() {\n        this.$videos.on('click', this.selectNewVideo.bind(this));\n    }\n}\n\nexport default function videoGallery() {\n    const pluginKey = 'video-gallery';\n    const $videoGallery = $(`[data-${pluginKey}]`);\n\n    $videoGallery.each((index, element) => {\n        const $el = $(element);\n        const isInitialized = $el.data(pluginKey) instanceof VideoGallery;\n\n        if (isInitialized) {\n            return;\n        }\n\n        $el.data(pluginKey, new VideoGallery($el));\n    });\n}\n","import utils from '@bigcommerce/stencil-utils';\nimport schematics from '../custom/schematics';\n\n/**\n * IntuitSolutions - Custom JS that fires on the PDP\n */\n\nexport default class ITSProduct {\n    constructor(context) {\n        this.context = context;\n\n        const showMoreReviews = this.showMoreReviews.bind(this)\n\n        $('.js-load-more-reviews').on('click', showMoreReviews);\n\n        // schematic + parts list buttons\n        $('.schematic__content .button:not(.button--pdf)').on('click', schematics);\n\n        $('.more-info-slider__text a[href=\"#tab-warranty\"]').on('click', (e) => {\n            const $targetTabId = $(e.currentTarget).attr('href');\n            $(`.tab-title[href=\"${$targetTabId}\"]`).trigger('click');\n        });\n    }\n\n    showMoreReviews(e) {\n        e.preventDefault();\n        const $store = $(e.currentTarget);\n        const currentPage = $store.data('current-page');\n        const productPageReviewsCount = this.context.productpageReviewsCount || 3;\n        const productPageURL = this.context.productpageURL;\n        const nextPageURL = `${productPageURL}?revpage=${currentPage + 1}`;\n\n        $store.attr('disabled', true);\n\n        const requestOptions = {\n            config: {\n                product: {\n                    reviews: {\n                        limit: productPageReviewsCount,\n                    },\n                },\n            },\n            template: 'products/ajax-reviews',\n        };\n\n        utils.api.getPage(nextPageURL, requestOptions, (err, res) => {\n            if (err) {\n                $store.attr('disable', false);\n                return;\n            }\n\n            $(res).hide().appendTo(\"#productReviews-list\").slideDown(200);\n\n            $store.data('current-page', currentPage + 1).attr('disabled', false);\n        })\n    }\n}\n","import PhotoSwipe from 'photoswipe';\nimport PhotoSwipeUIDefault from 'photoswipe/dist/photoswipe-ui-default';\n\nexport default function(event) {\n    event.preventDefault();\n\n    const image = new Image();\n    image.src = $(event.currentTarget).attr('href') || '';\n    image.onload = (event) => {\n        const data = [{\n            src: event.target.src,\n            w: event.target.width,\n            h: event.target.height,\n        }];\n\n        loadGallery(data);\n    };\n\n    function loadGallery(images) {\n        const pswpElement = document.querySelectorAll('.pswp')[0];\n        const options = {\n            index: 0,\n            bgOpacity: 0.8,\n        };\n\n        const gallery = new PhotoSwipe(pswpElement, PhotoSwipeUIDefault, images, options);\n\n        gallery.init();\n    }\n}\n"],"sourceRoot":""}